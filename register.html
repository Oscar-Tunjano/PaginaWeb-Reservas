<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Registro</title>
</head>
<body>

<h2>Crear cuenta</h2>

<form onsubmit="registrarUsuario(event)">
    <input id="nombre" type="text" placeholder="Nombre completo" required><br>
    <input id="correo" type="email" placeholder="Correo electrónico" required><br>
    <input id="contraseña" type="password" placeholder="Contraseña" required><br>
    <button type="submit">Registrarse</button>
</form>

<p>¿Ya tienes cuenta? <a href="login.html">Inicia sesión</a></p>

<script>
// ======================================
//  API REAL DEL BACKEND
// ======================================
const API_URL = "https://reservas-backend-sm.onrender.com/api/auth/register";

// ======================================
//  REGISTRAR USUARIO
// ======================================
async function registrarUsuario(event) {
    event.preventDefault();

    const nombre = document.getElementById("nombre").value.trim();
    const correo = document.getElementById("correo").value.trim().toLowerCase();
    const contraseña = document.getElementById("contraseña").value;

    if (!nombre || !correo || !contraseña) {
        alert("Por favor completa todos los campos");
        return;
    }

    try {
        const response = await fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ nombre, correo, contraseña })
        });

        const data = await response.json();

        if (!response.ok) {
            alert(data.error || "Error al registrar usuario");
            return;
        }

        alert("Registro exitoso. Ahora inicia sesión.");
        window.location.href = "login.html";

    } catch (error) {
        console.error(error);
        alert("Error al conectar con el servidor");
    }
}
</script>

</body>
</html>
